<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Days of Bed Care</title>
    <link href="archive.css" rel="stylesheet" />
</head>

<body>
    <!-- Top Navigation Bar -->
    <nav style="height: 80px;">
        <div class="nav-container">
            <a href="index.html" class="home" aria-label="Home"></a>
            <a href="archive.html" class="archive" aria-label="Archive"></a>
            <a href="about.html" class="about" aria-label="About"></a>
        </div>
    </nav>

    <!-- Content with Bed images and their corresponding BedPaint images -->
    <div class="Content">
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed1R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed1P.jpg" onclick="openModal('bed1')" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed2R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed2P.jpg" onclick="openModal('bed2')" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed3R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed3P.jpg" onclick="openModal('bed3')" />
        </div>
    </div>
    

    <!-- The Modal -->
    <div id="bed1" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed1')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed1R.jpg" alt="bed 1">
                <img src="BedImage/Bed1P.jpg" alt="bed 1 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item1')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item1" onclick="handleLike('item1')" class="like-button"></button>
                            <span id="like-count-item1" class="like-count">...</span>
                            <span id="comment-count-item1" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed2" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed2')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed2R.jpg" alt="bed 2">
                <img src="BedImage/Bed2P.jpg" alt="bed 2 Paint">
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item2')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item2" onclick="handleLike('item2')" class="like-button"></button>
                            <span id="like-count-item2" class="like-count">...</span>
                            <span id="comment-count-item2" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed3" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed3')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed3R.jpg" alt="bed 3">
                <img src="BedImage/Bed3P.jpg" alt="bed 3 Paint">
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item3')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item3" onclick="handleLike('item3')" class="like-button"></button>
                            <span id="like-count-item3"class="like-count">...</span>
                            <span id="comment-count-item3" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
             </div>
        </div>
    </div>

    <div class="Content">
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed4R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed4P.jpg" onclick="openModal('bed4');" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed5R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed5P.jpg" onclick="openModal('bed5')" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed6R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed6P.jpg" onclick="openModal('bed6')" />
        </div>
    </div>


    <!-- The Modal -->
    <div id="bed4" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed4')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed4R.jpg" alt="bed 4">
                <img src="BedImage/Bed4P.jpg" alt="bed 4 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item4')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item4" onclick="handleLike('item4')" class="like-button"></button>
                            <span id="like-count-item4"class="like-count">...</span>
                            <span id="comment-count-item4" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
             </div>
        </div>
    </div>

    <div id="bed5" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed5')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed5R.jpg" alt="bed 5">
                <img src="BedImage/Bed5P.jpg" alt="bed 5 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item5')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item5" onclick="handleLike('item5')" class="like-button"></button>
                            <span id="like-count-item5" class="like-count">...</span>
                            <span id="comment-count-item5" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed6" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed6')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed6R.jpg" alt="bed 6">
                <img src="BedImage/Bed6P.jpg" alt="bed 6 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item6')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item6" onclick="handleLike('item6')" class="like-button"></button>
                            <span id="like-count-item6" class="like-count">...</span>
                            <span id="comment-count-item6" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="Content">
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed7R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed7P.jpg" onclick="openModal('bed7');" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed8R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed8P.jpg" onclick="openModal('bed8')" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed9R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed9P.jpg" onclick="openModal('bed9')" />
        </div>
    </div>


    <!-- The Modal -->
    <div id="bed7" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed7')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed7R.jpg" alt="bed 7">
                <img src="BedImage/Bed7P.jpg" alt="bed 7 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item7')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item7" onclick="handleLike('item7')" class="like-button"></button>
                            <span id="like-count-item7" class="like-count">...</span>
                            <span id="comment-count-item7" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed8" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed8')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed8R.jpg" alt="bed 8">
                <img src="BedImage/Bed8P.jpg" alt="bed 8 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item8')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item8" onclick="handleLike('item8')" class="like-button"></button>
                            <span id="like-count-item8" class="like-count">...</span>
                            <span id="comment-count-item8" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed9" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed9')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed9R.jpg" alt="bed 9">
                <img src="BedImage/Bed9P.jpg" alt="bed 9 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item9')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item9" onclick="handleLike('item9')" class="like-button"></button>
                            <span id="like-count-item9" class="like-count">...</span>
                            <span id="comment-count-item9" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="Content">
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed10R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed10P.jpg" onclick="openModal('bed10');" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed11R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed11P.jpg" onclick="openModal('bed11')" />
        </div>
        <div class="image-container">
            <img class="Bed" src="./BedImage/Bed12R.jpg" />
            <img class="hiddenInfo" src="./BedImage/Bed12P.jpg" onclick="openModal('bed12')" />
        </div>
    </div>


    <!-- The Modal -->
    <div id="bed10" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed10')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed10R.jpg" alt="bed 10">
                <img src="BedImage/Bed10P.jpg" alt="bed 10 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item10')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item10" onclick="handleLike('item10')" class="like-button"></button>
                            <span id="like-count-item10" class="like-count">...</span>
                            <span id="comment-count-item10" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed11" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed11')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed11R.jpg" alt="bed 11">
                <img src="BedImage/Bed11P.jpg" alt="bed 11 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item11')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item11" onclick="handleLike('item11')" class="like-button"></button>
                            <span id="like-count-item11" class="like-count">...</span>
                            <span id="comment-count-item11" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bed12" class="modal">
        <div class="modal-content">
            <div class="modal-carousel">
                <button class="close" onclick="closeModal('bed12')"></button>
                <div class="carousel-container">
                <img src="BedImage/Bed12R.jpg" alt="bed 12">
                <img src="BedImage/Bed12P.jpg" alt="bed 12 Paint">
                <!-- Add more images as needed -->
            </div>
                <button class="carousel-prev">&#10094;</button>
                <button class="carousel-next">&#10095;</button>
            </div>
                <div class="modal-comments">
                    <p>This is a comment about the image.</p>
                    <p>Another comment goes here.</p>
                    <!-- 添加更多评论 -->
                    <div class="form-container">
                        <form id="comment-form" onsubmit="submitComment(event, 'item12')">
                            <div class="textarea-container">
                                <textarea id="name" name="name"  required></textarea>
                                <textarea id="comment" name="comment"  required></textarea>
                            </div>
                            <button type="submit" class="submit-button"></button>
                        </form>
                        <div class="like-container">
                            <button id="like-button-item12" onclick="handleLike('item12')" class="like-button"></button>
                            <span id="like-count-item12" class="like-count">...</span>
                            <span id="comment-count-item12" class="comment-count">2</span>
                        </div>
                        <p class="result"></p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function showImage(imageId) {
            document.getElementById(imageId).style.display = 'block';
        }
        // Add event listeners to all textareas to toggle the "focused" class
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('focus', function() {
                this.classList.add('focused');
            });
        });

        async function loadLikes(itemId) {
            try {
            const response = await fetch('/.netlify/functions/getlikes');
            const data = await response.json();
            document.getElementById(`like-count-${itemId}`).textContent = `${data[itemId] || 0}`;
            } catch (error) {
            console.error('Error fetching likes:', error);
            // document.getElementById(`like-count-${itemId}`).textContent = 'Error loading';
            }
        }

        async function handleLike(itemId) {
            try {
            const response = await fetch('/.netlify/functions/like', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ item_id: itemId }),
            });

            const data = await response.json();
            document.getElementById(`like-count-${itemId}`).textContent = `${data[itemId]}`;
            // 改变按钮的样式，显示爱心图片
            document.getElementById(`like-button-${itemId}`).classList.add('liked');
            } catch (error) {
            console.error('Error updating like:', error);
            // document.getElementById(`like-count-${itemId}`).textContent = 'Error updating';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadLikes('item1');
        });
        document.addEventListener('DOMContentLoaded', () => {
            const itemIds = ['item1', 'item2', 'item3','item4', 'item5', 'item6','item7', 'item8', 'item9','item10', 'item11', 'item12'];

            itemIds.forEach(itemId => {
                loadLikes(itemId);
            });
        });



        async function submitComment(event, itemId) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const comment = document.getElementById('comment').value;

            try {
                const response = await fetch('/.netlify/functions/postComment', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ item_id: itemId, name: name, comment: comment }),
                });

                const data = await response.json();
                console.log('Response data:', data);

                if (data.success) {
                    // 清空表单并显示成功消息
                    document.getElementById('comment-form').reset();
                    alert('Comment submitted successfully!');
                }
            } catch (error) {
                console.error('Error submitting comment:', error);
            }
        }

        
        function openModal(id) {
            document.getElementById(id).style.display = "block";
            document.body.classList.add('disable-hover'); // Disable hover effect
            document.body.style.overflow = "hidden"; // 禁用页面滚动

        }

        function closeModal(id) {
            document.getElementById(id).style.display = "none";
            document.body.classList.remove('disable-hover'); // Enable hover effect
            document.body.style.overflow = "auto"; // 恢复页面滚动

        }

        // Close the modal if the user clicks outside of it
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal(event.target.id);
            }
        }
            document.addEventListener('DOMContentLoaded', function() {
                const carousels = document.querySelectorAll('.modal-carousel');

                carousels.forEach(carousel => {
                    const prevButton = carousel.querySelector('.carousel-prev');
                    const nextButton = carousel.querySelector('.carousel-next');
                    const carouselContainer = carousel.querySelector('.carousel-container');
                    const images = carouselContainer.querySelectorAll('img');
                    let index = 0;
                    const totalImages = images.length;

                    function updateCarousel() {
                        const offset = -index * 100; // Calculate the offset for the current image
                        carouselContainer.style.transform = `translateX(${offset}%)`;
                    }

                    nextButton.addEventListener('click', function() {
                        index = (index + 1) % totalImages; // Move to the next image
                        updateCarousel();
                    });

                    prevButton.addEventListener('click', function() {
                        index = (index - 1 + totalImages) % totalImages; // Move to the previous image
                        updateCarousel();
                    });

                    // Initialize the carousel
                    updateCarousel();
                });
        });
        const textarea = document.getElementById('name');

        const overlayImage = document.getElementByName('frame');

        textarea.addEventListener('focus', function() {
            overlayImage.style.display = 'block'; // Show the image when the textarea is focused
        });

        // Optional: Hide the image when clicking on the image itself
        overlayImage.addEventListener('click', function() {
            overlayImage.style.display = 'none'; // Hide the image when clicked
        });

    </script>
</body>

</html>